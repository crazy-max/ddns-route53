{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#what-is-ddns-route53","title":"What is ddns-route53?","text":"<p>ddns-route53  is a CLI application written in Go and delivered as a binary and a Docker image that lets you run your own dynamic DNS service with Amazon Route 53 on a time-based schedule.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Handle IPv4 and IPv6 addresses</li> <li>Internal cron implementation through go routines</li> </ul>"},{"location":"#license","title":"License","text":"<p>This project is licensed under the terms of the MIT license.</p>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#2140-20251230","title":"2.14.0 (2025/12/30)","text":"<ul> <li>Go 1.25 (#1306)</li> <li>Alpine Linux 3.23 (#1309)</li> <li>MkDocs Material 9.6.20 (#1302 #1304)</li> <li>Bump github.com/alecthomas/kong from 1.13.0 (#1318)</li> <li>Bump github.com/aws/aws-sdk-go-v2 dependencies (#1292)<ul> <li>github.com/aws/aws-sdk-go-v2 to 1.41.0</li> <li>github.com/aws/aws-sdk-go-v2/config to 1.32.6</li> <li>github.com/aws/aws-sdk-go-v2/credentials to 1.19.6</li> <li>github.com/aws/aws-sdk-go-v2/service/route53 to 1.62.0</li> </ul> </li> <li>Bump github.com/dromara/carbon/v2 to 2.6.15 (#1314)</li> <li>Bump github.com/go-playground/validator/v10 to 10.30.1 (#1317)</li> <li>Bump github.com/hashicorp/go-retryablehttp to 0.7.8 (#1315)</li> <li>Bump github.com/rs/zerolog to 1.34.0 (#1296)</li> <li>Bump github.com/stretchr/testify to 1.11.1 (#1311)</li> <li>Bump golang.org/x/sys to 0.39.0 (#1293)</li> <li>Bump golang.org/x/crypto to 0.45.0 (#1308)</li> </ul>"},{"location":"changelog/#2130-20241220","title":"2.13.0 (2024/12/20)","text":"<ul> <li>Allow non-static AWS Credentials (#1204)</li> <li>Go 1.23 (#1258)</li> <li>Alpine Linux 3.21 (#1258)</li> <li>Switch to github.com/dromara/carbon/v2 2.5.2 (#1259)</li> <li>Bump github.com/alecthomas/kong to 1.6.0 (#1251)</li> <li>Bump github.com/aws/aws-sdk-go-v2 dependencies (#1254)<ul> <li>github.com/aws/aws-sdk-go-v2 to 1.32.7</li> <li>github.com/aws/aws-sdk-go-v2/config to 1.28.7</li> <li>github.com/aws/aws-sdk-go-v2/credentials to 1.17.48</li> <li>github.com/aws/aws-sdk-go-v2/service/route53 to 1.46.4</li> </ul> </li> <li>Bump github.com/go-playground/validator/v10 to 10.23.0 (#1219 #1253)</li> <li>Bump github.com/hashicorp/go-retryablehttp to 0.7.7 (#1214)</li> <li>Bump github.com/rs/zerolog to 1.33.0 (#1212)</li> <li>Bump golang.org/x/crypto to 0.31.0 (#1257)</li> <li>Bump golang.org/x/net to 0.23.0 (#1201)</li> <li>Bump golang.org/x/sys to 0.28.0 (#1217 #1252)</li> </ul>"},{"location":"changelog/#2120-20240324","title":"2.12.0 (2024/03/24)","text":"<ul> <li>Generate sbom and provenance (#1193)</li> <li>Bump github.com/alecthomas/kong to 0.9.0 (#1187)</li> <li>Bump github.com/aws/aws-sdk-go-v2 dependencies (#1154 #1158 #1191)<ul> <li>github.com/aws/aws-sdk-go-v2 to 1.26.0</li> <li>github.com/aws/aws-sdk-go-v2/config to 1.27.9</li> <li>github.com/aws/aws-sdk-go-v2/credentials to 1.17.9</li> <li>github.com/aws/aws-sdk-go-v2/service/route53 to 1.40.3</li> </ul> </li> <li>Bump github.com/go-playground/validator/v10 to 10.19.0 (#1183)</li> <li>Bump github.com/rs/zerolog to 1.32.0 (#1172)</li> <li>Bump golang.org/x/crypto to 0.17.0 (#1153)</li> <li>Bump golang.org/x/sys to 0.18.0 (#1184)</li> </ul>"},{"location":"changelog/#2110-20231216","title":"2.11.0 (2023/12/16)","text":"<ul> <li>Go 1.21 (#1152)</li> <li>Bump github.com/alecthomas/kong to 0.8.1 (#1077)</li> <li>Bump github.com/aws/aws-sdk-go-v2 to 1.24.0 (#1144)</li> <li>Bump github.com/aws/aws-sdk-go-v2/config to 1.26.1 (#1147)</li> <li>Bump github.com/aws/aws-sdk-go-v2/credentials to 1.16.12 (#1145)</li> <li>Bump github.com/aws/aws-sdk-go-v2/service/route53 to 1.35.5 (#1146)</li> <li>Bump github.com/go-playground/validator/v10 to 10.16.0 (#1096)</li> <li>Bump github.com/hashicorp/go-retryablehttp to 0.7.5 (#1101)</li> <li>Bump golang.org/x/net to 0.17.0 (#1076)</li> <li>Bump golang.org/x/sys to 0.15.0 (#1124)</li> </ul>"},{"location":"changelog/#2100-20230927","title":"2.10.0 (2023/09/27)","text":"<ul> <li>Align AWS request retries with <code>max-retries</code> flag and decrease backoff delay to 5s (#1064)</li> <li>Add max backoff delay option (#1065)</li> <li>Go 1.20 (#995)</li> <li>Alpine Linux 3.18 (#996)</li> <li>Bump github.com/alecthomas/kong to 0.8.0 (#994)</li> <li>Bump github.com/aws/aws-sdk-go-v2 to 1.21.0 (#989 #1035)</li> <li>Bump github.com/aws/aws-sdk-go-v2/config to 1.18.42 (#908 #991 #1047 #1062)</li> <li>Bump github.com/aws/aws-sdk-go-v2/credentials to 1.13.37 (#992 #1046)</li> <li>Bump github.com/aws/aws-sdk-go-v2/service/route53 to 1.29.5 (#907 #993 #1037)</li> <li>Bump github.com/crazy-max/gonfig to 0.7.1 (#975)</li> <li>Bump github.com/go-playground/validator/v10 to 10.15.4 (#984 #1020 #1056)</li> <li>Bump github.com/hashicorp/go-retryablehttp to 0.7.4 (#905 #985)</li> <li>Bump github.com/rs/zerolog to 1.31.0 (#918 #961 #1011 #1063)</li> <li>Bump github.com/stretchr/testify to 1.8.4 (#937 #982)</li> <li>Bump golang.org/x/crypto to 0.1.0 (#939) </li> <li>Bump golang.org/x/sys to 0.12.0 (#906 #938 #953 #969 #986 #997 #1019 #1044)</li> <li>Bump golang.org/x/text to 0.3.8 (#936)</li> </ul>"},{"location":"changelog/#290-20221231","title":"2.9.0 (2022/12/31)","text":"<ul> <li>Switch to retryable http client implementation (#900)</li> <li>Allow specifying custom interface (#901)</li> <li>Check record value with WAN IP and update accordingly (#902)<ul> <li> requires <code>route53:ListResourceRecordSets</code> authorization in IAM policy</li> </ul> </li> <li>Update to AWS SDK v2 (#899)</li> <li>Go 1.19 (#846 #750)</li> <li>Alpine Linux 3.17 (#898)</li> <li>Enhance workflow (#847)</li> <li>Bump github.com/go-playground/validator/v10 from 10.10.0 to 10.11.1 (#667 #710 #825)</li> <li>Bump github.com/alecthomas/kong from 0.3.0 to 0.7.1 (#673 #749 #754 #864)</li> <li>Bump github.com/stretchr/testify from 1.7.0 to 1.8.1 (#675 #743 #767 #848)</li> <li>Bump github.com/rs/zerolog from 1.26.1 to 1.27.0 (#744)</li> <li>Bump golang.org/x/sys to v0.3.0 (#751 #903)</li> <li>Bump github.com/crazy-max/gonfig from 0.5.0 to 0.6.0 (#780)</li> <li>Bump github.com/rs/zerolog from 1.27.0 to 1.28.0 (#810)</li> </ul>"},{"location":"changelog/#280-20220126","title":"2.8.0 (2022/01/26)","text":"<ul> <li>Alpine Linux 3.15 (#622)</li> <li>MkDocs Material 8.1.8 (#637)</li> <li>goreleaser-xx 1.2.5 (#627)</li> <li>Move <code>syscall</code> to <code>golang.org/x/sys</code> (#612)</li> <li>Move from <code>io/ioutil</code> to <code>io</code> and <code>os</code> packages (#613)</li> <li>Enhance dockerfiles (#610 #611)</li> <li>Bump github.com/go-playground/validator/v10 from 10.9.0 to 10.10.0 (#614)</li> <li>Bump github.com/alecthomas/kong from 0.2.17 to 0.3.0 (#576 #599 #605 #620)</li> <li>Bump github.com/aws/aws-sdk-go from 1.40.37 to 1.42.41 (#551 #577 #615 #623 #636)</li> <li>Bump github.com/rs/zerolog from 1.24.0 to 1.26.1 (#534 #574 #607)</li> </ul>"},{"location":"changelog/#270-20210905","title":"2.7.0 (2021/09/05)","text":"<ul> <li>Go 1.17 (#519)</li> <li>Add <code>windows/arm64</code> artifact</li> <li>Wrong remaining time displayed</li> <li>Bump github.com/aws/aws-sdk-go from 1.38.69 to 1.40.37 (#518 #531)</li> <li>Bump github.com/rs/zerolog from 1.23.0 to 1.24.0 (#525)</li> <li>Bump github.com/crazy-max/gonfig from 0.4.0 to 0.5.0 (#520)</li> <li>Bump codecov/codecov-action from 1 to 2</li> <li>Bump github.com/go-playground/validator/v10 from 10.6.1 to 10.9.0 (#483 #508)</li> <li>Corrected Unifi documentation (#477)</li> </ul>"},{"location":"changelog/#261-20210629","title":"2.6.1 (2021/06/29)","text":"<ul> <li><code>windows/arm64</code> not yet available</li> </ul>"},{"location":"changelog/#260-20210629","title":"2.6.0 (2021/06/29)","text":"<ul> <li>Bump github.com/aws/aws-sdk-go from 1.38.55 to 1.38.69 (#472)</li> <li>Add <code>linux/riscv64</code> and <code>windows/arm64</code> artifacts (#475)</li> <li>Alpine Linux 3.14 (#474)</li> <li>Added quotations to linux service (#473)</li> <li>Bump github.com/rs/zerolog from 1.22.0 to 1.23.0 (#463)</li> <li>Bump github.com/alecthomas/kong from 0.2.16 to 0.2.17 (#457)</li> </ul>"},{"location":"changelog/#250-20210605","title":"2.5.0 (2021/06/05)","text":"<ul> <li>Bump github.com/go-playground/validator/v10 from 10.4.1 to 10.6.1 (#435)</li> <li>Allow disabling log color output (#456)</li> <li>Update build workflow (#455)</li> <li>Add cni installation to unifi-os install (#438)</li> <li>MkDocs Materials 7.1.5 (#453)</li> <li>Fix artifacts download links</li> <li>Set <code>cacheonly</code> output for validators</li> <li>Move to <code>docker/metadata-action</code></li> <li>Add <code>darwin/arm64</code> artifact</li> <li>Deploy docs on workflow dispatch or tag</li> <li>Bump github.com/rs/zerolog from 1.20.0 to 1.22.0 (#388 #437)</li> <li>Go 1.16 (#390)</li> <li>Bump github.com/aws/aws-sdk-go from 1.37.25 to 1.38.55 (#377 #391 #454)</li> <li>Bump github.com/alecthomas/kong from 0.2.15 to 0.2.16 (#376)</li> </ul>"},{"location":"changelog/#240-20210307","title":"2.4.0 (2021/03/07)","text":"<ul> <li>Bump github.com/aws/aws-sdk-go from 1.36.20 to 1.37.25 (#374)</li> <li>Fix WanIP provider</li> <li>Missing non-root user for Docker image</li> <li>Switch to <code>goreleaser-xx</code> (#373)</li> <li>Remove s390x Docker image support (#361)</li> <li>Bump github.com/alecthomas/kong from 0.2.12 to 0.2.15 (#353)</li> <li>Bump github.com/stretchr/testify from 1.6.1 to 1.7.0 (#339)</li> </ul>"},{"location":"changelog/#230-20210105","title":"2.3.0 (2021/01/05)","text":"<ul> <li>Bump github.com/aws/aws-sdk-go from 1.35.28 to 1.36.20 (#332)</li> <li>Refactor CI and dev workflow with buildx bake (#333)<ul> <li>Upload artifacts</li> <li>Add <code>image-local</code> target</li> <li>Single job for artifacts and image</li> <li>Add <code>armv5</code>, <code>ppc64le</code> and <code>s390x</code> artifacts</li> </ul> </li> <li>Handle multi IP providers (#331)</li> <li>Bump github.com/alecthomas/kong from 0.2.11 to 0.2.12 (#307)</li> </ul>"},{"location":"changelog/#220-20201115","title":"2.2.0 (2020/11/15)","text":"<ul> <li>Use embedded tzdata package</li> <li>Remove <code>--timezone</code> flag</li> <li>Docker image also available on GitHub Container Registry</li> <li>Switch to Docker actions</li> <li>Update deps</li> </ul>"},{"location":"changelog/#210-20200907","title":"2.1.0 (2020/09/07)","text":"<ul> <li>Don't fill record change if IP address not available (#224)</li> <li>Go 1.15</li> <li>Update deps</li> </ul>"},{"location":"changelog/#201-20200805","title":"2.0.1 (2020/08/05)","text":"<ul> <li>Fix nil pointer with AWS credentials (#186)</li> </ul>"},{"location":"changelog/#200-20200722","title":"2.0.0 (2020/07/22)","text":"<p> See Migration notes in the documentation for breaking changes.</p> <ul> <li>Configuration transposed into environment variables</li> <li><code>AWS_HOSTED_ZONE_ID</code> env var renamed <code>DDNSR53_ROUTE53_HOSTEDZONEID</code></li> <li>Improve configuration validation</li> <li>All fields in configuration now camelCased</li> <li>Add tests and coverage</li> <li>Dockerfile enhanced</li> <li>Seek configuration file from default places</li> <li>Configuration file not required anymore</li> <li>Switch to gonfig</li> <li>Add fields to load sensitive values from file</li> <li>Handle AWS EnvProvider for credentials</li> <li>Docs website with mkdocs</li> <li>Update deps</li> </ul>"},{"location":"changelog/#1101-20200619","title":"1.10.1 (2020/06/19)","text":"<ul> <li>Fix unpublished Docker image</li> </ul>"},{"location":"changelog/#1100-20200619","title":"1.10.0 (2020/06/19)","text":"<ul> <li>Add support for mips architectures (#160)</li> <li>aws-sdk-go 1.32.1</li> <li>Update deps</li> </ul>"},{"location":"changelog/#191-20200514","title":"1.9.1 (2020/05/14)","text":"<ul> <li>Typo</li> </ul>"},{"location":"changelog/#190-20200514","title":"1.9.0 (2020/05/14)","text":"<ul> <li>Allow using <code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code> and <code>AWS_HOSTED_ZONE_ID</code> environment variables (#130)</li> <li>Check AWS Route53 hosted zone ID entry</li> <li>aws-sdk-go 1.30.27</li> </ul>"},{"location":"changelog/#180-20200506","title":"1.8.0 (2020/05/06)","text":"<ul> <li>Add <code>--log-caller</code> flag</li> <li>Flag <code>--log-json</code> not handled</li> <li>aws-sdk-go 1.30.20</li> <li>Update deps</li> </ul>"},{"location":"changelog/#170-20200406","title":"1.7.0 (2020/04/06)","text":"<ul> <li>Switch to kong command-line parser</li> <li>Use Open Container Specification labels as label-schema.org ones are deprecated</li> <li>aws-sdk-go 1.30.3</li> <li>Update deps</li> </ul>"},{"location":"changelog/#160-20191220","title":"1.6.0 (2019/12/20)","text":"<ul> <li>Strengthen WAN IP address retrieval and validation</li> <li>Move ident.me client to pkg</li> <li>Add <code>--max-retries</code> flag</li> <li>aws-sdk-go 1.26.6</li> <li>Update deps</li> <li>Go 1.13.5</li> </ul>"},{"location":"changelog/#150-20191111","title":"1.5.0 (2019/11/11)","text":"<ul> <li>Seconds field is now optional</li> <li>aws-sdk-go 1.25.31</li> <li>Cache go modules</li> </ul>"},{"location":"changelog/#142-20191008","title":"1.4.2 (2019/10/08)","text":"<ul> <li>Allow both IPv4 and IPv6 records (#7)</li> <li>Use Docker buildx action v1</li> </ul>"},{"location":"changelog/#141-20190927","title":"1.4.1 (2019/09/27)","text":"<ul> <li>Build on respective platforms</li> <li>Update deps</li> <li>Go 1.12.10</li> </ul>"},{"location":"changelog/#140-20190926","title":"1.4.0 (2019/09/26)","text":"<ul> <li>Run Docker container as non-root user</li> </ul>"},{"location":"changelog/#134-20190922","title":"1.3.4 (2019/09/22)","text":"<ul> <li>Use GOPROXY</li> <li>Update workflow<ul> <li>Use softprops/action-gh-release to create GitHub release</li> <li>Use ghaction-goreleaser GitHub Action</li> <li>Use ghaction-docker-buildx GitHub Action</li> </ul> </li> <li>Stop publishing Docker image on Quay</li> </ul>"},{"location":"changelog/#133-20190908","title":"1.3.3 (2019/09/08)","text":"<ul> <li>Fix DockerHub latest tag</li> </ul>"},{"location":"changelog/#132-20190831","title":"1.3.2 (2019/08/31)","text":"<ul> <li>Reenable multi-platform Docker images (#4)</li> </ul>"},{"location":"changelog/#131-20190831","title":"1.3.1 (2019/08/31)","text":"<ul> <li>Remove multi-platform Docker image, need rework (#4)</li> </ul>"},{"location":"changelog/#130-20190831","title":"1.3.0 (2019/08/31)","text":"<ul> <li>Multi-platform Docker image (#4)</li> <li>Remove GitHub Package support</li> </ul>"},{"location":"changelog/#121-20190829","title":"1.2.1 (2019/08/29)","text":"<ul> <li>Push Docker image to GitHub Package</li> </ul>"},{"location":"changelog/#120-20190829","title":"1.2.0 (2019/08/29)","text":"<ul> <li>Switch to GitHub Actions</li> </ul>"},{"location":"changelog/#110-20190718","title":"1.1.0 (2019/07/18)","text":"<ul> <li>Display next execution time</li> <li>Use v3 robfig/cron</li> <li>Go 1.12.4</li> </ul>"},{"location":"changelog/#100-20190603","title":"1.0.0 (2019/06/03)","text":"<ul> <li>Run once on startup (#2)</li> <li>Update libs</li> </ul>"},{"location":"changelog/#020-20190402","title":"0.2.0 (2019/04/02)","text":"<ul> <li>Handle IPv4 or IPv6 only if included in a record set (#1)</li> <li>Update libs</li> </ul>"},{"location":"changelog/#011-20190402","title":"0.1.1 (2019/04/02)","text":"<ul> <li>Fix update of last IPv4/IPv6</li> </ul>"},{"location":"changelog/#010-20190401","title":"0.1.0 (2019/04/01)","text":"<ul> <li>Initial version based on aws-sdk-go 1.19.6</li> </ul>"},{"location":"contributing/","title":"Contributing","text":"<p>Hi there! I'm thrilled that you'd like to contribute to this project. Your help is essential for keeping it great.</p> <p>Contributions to this project are released to the public under the project's open source license.</p>"},{"location":"contributing/#submitting-a-pull-request","title":"Submitting a pull request","text":"<ol> <li>Fork and clone the repository</li> <li>Configure and install the dependencies: <code>go mod download</code></li> <li>Create a new branch: <code>git checkout -b my-branch-name</code></li> <li>Make your changes</li> <li>Validate: <code>docker buildx bake validate</code></li> <li>Test your code: <code>docker buildx bake test</code></li> <li>Build the project: <code>docker buildx bake artifact-all image-all</code></li> <li>Push to your fork and submit a pull request</li> <li>Pat your self on the back and wait for your pull request to be reviewed and merged.</li> </ol> <p>Here are a few things you can do that will increase the likelihood of your pull request being accepted:</p> <ul> <li>Make sure the <code>README.md</code> and any other relevant documentation are kept up-to-date.</li> <li>I try to follow SemVer v2.0.0. Randomly breaking public APIs is not an option.</li> <li>Keep your change as focused as possible. If there are multiple changes you would like to make that are not dependent upon each other, consider submitting them as separate pull requests.</li> <li>Write a good commit message.</li> </ul>"},{"location":"contributing/#resources","title":"Resources","text":"<ul> <li>How to Contribute to Open Source</li> <li>Using Pull Requests</li> <li>GitHub Help</li> </ul>"},{"location":"donate/","title":"Donate","text":"<p>ddns-route53  is free and open source and always will be.</p> <p>All kinds of contributions are welcome! The most basic way to show your support is to star the project, or to raise issues.</p> <p>You can also support this project by becoming a sponsor on GitHub or by making a PayPal donation to ensure this journey continues indefinitely!</p>"},{"location":"faq/","title":"FAQ","text":""},{"location":"faq/#timezone","title":"Timezone","text":"<p>By default, all interpretation and scheduling is done with your local timezone (<code>TZ</code> environment variable).</p> <p>Cron schedule may also override the timezone to be interpreted in by providing an additional space-separated field at the beginning of the cron spec, of the form <code>CRON_TZ=&lt;timezone&gt;</code>:</p> <pre><code>ddns-route53 --schedule \"CRON_TZ=Asia/Tokyo */30 * * * *\"\n</code></pre>"},{"location":"faq/#where-is-my-public-ip-address-sourced-from","title":"Where is my public IP address sourced from?","text":"<p>Public IP address is sourced from one of several providers. The first to provide a valid IP address is used.</p>"},{"location":"faq/#ipv4","title":"IPv4","text":"<ul> <li>https://ipv4.nsupdate.info/myip</li> <li>https://v4.ident.me</li> <li>https://ipv4.yunohost.org</li> <li>https://ipv4.wtfismyip.com/text</li> </ul>"},{"location":"faq/#ipv6","title":"IPv6","text":"<ul> <li>https://ipv6.nsupdate.info/myip</li> <li>https://v6.ident.me</li> <li>https://ipv6.yunohost.org</li> <li>https://ipv6.wtfismyip.com/text</li> </ul>"},{"location":"reporting-issue/","title":"Reporting an issue","text":""},{"location":"reporting-issue/#before-submitting-an-issue","title":"Before submitting an issue","text":"<p>First, be a good guy.</p> <p>Please do a search in open issues to see if the issue or feature request has already been filed.</p> <p>If you find your issue already exists, make relevant comments and add your reaction. Use a reaction in place of a \"+1\" comment.</p> <p> - upvote</p> <p> - downvote</p> <p>If you cannot find an existing issue that describes your bug or feature, submit an issue using the guidelines below.</p>"},{"location":"reporting-issue/#writing-good-bug-reports-and-feature-requests","title":"Writing good bug reports and feature requests","text":"<p>File a single issue per problem and feature request.</p> <ul> <li>Do not enumerate multiple bugs or feature requests in the same issue.</li> <li>Do not add your issue as a comment to an existing issue unless it's for the identical input. Many issues look similar, but have different causes.</li> </ul> <p>The more information you can provide, the more likely someone will be successful reproducing the issue and finding a fix.</p> <p>You are now ready to create a new issue!</p>"},{"location":"reporting-issue/#closure-policy","title":"Closure policy","text":"<ul> <li>Issues that don't have the information requested above (when applicable) will be closed immediately and the poster directed to the support guidelines.</li> <li>Issues that go a week without a response from original poster are subject to closure at our discretion.</li> </ul>"},{"location":"config/","title":"Configuration","text":""},{"location":"config/#overview","title":"Overview","text":"<p>There are two different ways to define configuration in ddns-route53:</p> <ul> <li>In a configuration file</li> <li>As environment variables</li> </ul> <p>These ways are evaluated in the order listed above.</p> <p>If no value was provided for a given option, a default value applies. Moreover, if an option has sub-options, and any of these sub-options is not specified, a default value will apply as well.</p>"},{"location":"config/#configuration-file","title":"Configuration file","text":"<p>At startup, ddns-route53 searches for a file named <code>ddns-route53.yml</code> (or <code>ddns-route53.yaml</code>) in:</p> <ul> <li><code>/etc/ddns-route53/</code></li> <li><code>$XDG_CONFIG_HOME/</code></li> <li><code>$HOME/.config/</code></li> <li><code>.</code> (the working directory)</li> </ul> <p>You can override this using the <code>--config</code> flag or <code>CONFIG</code> env var.</p> ddns-route53.yml <pre><code>credentials:\n  accessKeyID: \"ABCDEFGHIJKLMNO123456\"\n  secretAccessKey: \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\"\n\nroute53:\n  hostedZoneID: \"ABCEEFG123456789\"\n  recordsSet:\n    - name: \"ddns.example.com.\"\n      type: \"A\"\n      ttl: 300\n    - name: \"ddns.example.com.\"\n      type: \"AAAA\"\n      ttl: 300\n    - name: \"another.example2.com.\"\n      type: \"A\"\n      ttl: 600\n</code></pre>"},{"location":"config/#environment-variables","title":"Environment variables","text":"<p>All configuration from file can be transposed into environment variables. As an example, the following configuration:</p> ddns-route53.yml <pre><code>credentials:\n  accessKeyID: \"ABCDEFGHIJKLMNO123456\"\n  secretAccessKey: \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\"\n\nroute53:\n  hostedZoneID: \"ABCEEFG123456789\"\n  recordsSet:\n    - name: \"ddns.example.com.\"\n      type: \"A\"\n      ttl: 300\n    - name: \"ddns.example.com.\"\n      type: \"AAAA\"\n      ttl: 300\n    - name: \"another.example2.com.\"\n      type: \"A\"\n      ttl: 600\n</code></pre> <p>Can be transposed to:</p> environment variables <pre><code>DDNSR53_CREDENTIALS_ACCESSKEYID=ABCDEFGHIJKLMNO123456\nDDNSR53_CREDENTIALS_SECRETACCESSKEY=abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\n\nDDNSR53_ROUTE53_HOSTEDZONEID=ABCEEFG123456789\nDDNSR53_ROUTE53_RECORDSSET_0_NAME=ddns.example.com.\nDDNSR53_ROUTE53_RECORDSSET_0_TYPE=A\nDDNSR53_ROUTE53_RECORDSSET_0_TTL=300\nDDNSR53_ROUTE53_RECORDSSET_1_NAME=ddns.example.com.\nDDNSR53_ROUTE53_RECORDSSET_1_TYPE=AAAA\nDDNSR53_ROUTE53_RECORDSSET_1_TTL=300\nDDNSR53_ROUTE53_RECORDSSET_2_NAME=another.example2.com.\nDDNSR53_ROUTE53_RECORDSSET_2_TYPE=A\nDDNSR53_ROUTE53_RECORDSSET_2_TTL=600\n</code></pre>"},{"location":"config/#reference","title":"Reference","text":"<ul> <li>credentials</li> <li>route53</li> </ul>"},{"location":"config/credentials/","title":"Credentials configuration","text":"<p>AWS credentials are required for getting access and manage your Route53 zone.</p> <p>Note</p> <p>When running ddns-route53 on an EC2 instance or in a Kubernetes cluster configured with IAM roles for service accounts (IRSA) AWS credentials are not required. ddns-route53 will automatically detect the presence of the configured IAM role and use it to authenticate with Route 53.</p> <pre><code>credentials:\n  accessKeyID: \"ABCDEFGHIJKLMNO123456\"\n  secretAccessKey: \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\"\n</code></pre>"},{"location":"config/credentials/#accesskeyid","title":"<code>accessKeyID</code>","text":"<p>AWS Access Key.</p> <p>Config file</p> <pre><code>credentials:\n  accessKeyID: \"ABCDEFGHIJKLMNO123456\"\n</code></pre> <p>Environment variables</p> <ul> <li><code>DDNSR53_CREDENTIALS_ACCESSKEYID</code></li> <li><code>AWS_ACCESS_KEY_ID</code> (through AWS env provider)</li> <li><code>AWS_ACCESS_KEY</code> (through AWS env provider)</li> </ul>"},{"location":"config/credentials/#accesskeyidfile","title":"<code>accessKeyIDFile</code>","text":"<p>Use content of secret file as AWS Access Key if <code>accessKeyID</code> not defined.</p> <p>Config file</p> <pre><code>credentials:\n  accessKeyIDFile: /run/secrets/akid\n</code></pre> <p>Environment variables</p> <ul> <li><code>DDNSR53_CREDENTIALS_ACCESSKEYIDFILE</code></li> </ul>"},{"location":"config/credentials/#secretaccesskey","title":"<code>secretAccessKey</code>","text":"<p>AWS Secret Key.</p> <p>Config file</p> <pre><code>credentials:\n  secretAccessKey: \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\"\n</code></pre> <p>Environment variables</p> <ul> <li><code>DDNSR53_CREDENTIALS_SECRETACCESSKEY</code></li> <li><code>AWS_SECRET_ACCESS_KEY</code> (through AWS env provider)</li> <li><code>AWS_SECRET_KEY</code> (through AWS env provider)</li> </ul>"},{"location":"config/credentials/#secretaccesskeyfile","title":"<code>secretAccessKeyFile</code>","text":"<p>Use content of secret file as AWS Secret Key if <code>secretAccessKey</code> not defined.</p> <p>Config file</p> <pre><code>credentials:\n  secretAccessKeyFile: /run/secrets/sak\n</code></pre> <p>Environment variables</p> <ul> <li><code>DDNSR53_CREDENTIALS_SECRETACCESSKEYFILE</code></li> </ul>"},{"location":"config/route53/","title":"Route53 configuration","text":""},{"location":"config/route53/#hostedzoneid","title":"<code>hostedZoneID</code>","text":"<p>AWS Route53 hosted zone ID.</p> <p>Config file</p> <pre><code>route53:\n  hostedZoneID: \"ABCEEFG123456789\"\n</code></pre> <p>Environment variables</p> <ul> <li><code>DDNSR53_ROUTE53_HOSTEDZONEID</code></li> </ul>"},{"location":"config/route53/#recordsset","title":"<code>recordsSet</code>","text":"<p>Slice of records set.</p> <pre><code>route53:\n  recordsSet:\n    - name: \"ddns.example.com.\"\n      type: \"A\"\n      ttl: 300\n    - name: \"ddns.example.com.\"\n      type: \"AAAA\"\n      ttl: 300\n    - name: \"another.example2.com.\"\n      type: \"A\"\n      ttl: 600\n</code></pre>"},{"location":"config/route53/#name","title":"<code>name</code>","text":"<p>AWS Route53 record set name.</p> <p>Warning</p> <p>Don't forget to suffix with a dot</p> <p>Config file</p> <pre><code>route53:\n  recordsSet:\n    - name: \"ddns.example.com.\"\n</code></pre> <p>Environment variables</p> <ul> <li><code>DDNSR53_ROUTE53_RECORDSSET_&lt;KEY&gt;_NAME</code></li> </ul>"},{"location":"config/route53/#type","title":"<code>type</code>","text":"<p>AWS Route53 record set type. Can be <code>A</code> or <code>AAAA</code>.</p> <p>Config file</p> <pre><code>route53:\n  recordsSet:\n    - name: \"ddns.example.com.\"\n      type: A\n</code></pre> <p>Environment variables</p> <ul> <li><code>DDNSR53_ROUTE53_RECORDSSET_&lt;KEY&gt;_TYPE</code></li> </ul>"},{"location":"config/route53/#ttl","title":"<code>ttl</code>","text":"<p>AWS Route53 record TTL (time to live) in seconds.</p> <p>Config file</p> <pre><code>route53:\n  recordsSet:\n    - name: \"ddns.example.com.\"\n      ttl: 300\n</code></pre> <p>Environment variables</p> <ul> <li><code>DDNSR53_ROUTE53_RECORDSSET_&lt;KEY&gt;_TTL</code></li> </ul>"},{"location":"install/binary/","title":"Installation from binary","text":""},{"location":"install/binary/#download","title":"Download","text":"<p>ddns-route53 binaries are available on releases page.</p> <p>Choose the archive matching the destination platform:</p> <ul> <li><code>ddns-route53_2.14.0_darwin_arm64.tar.gz</code></li> <li><code>ddns-route53_2.14.0_darwin_amd64.tar.gz</code></li> <li><code>ddns-route53_2.14.0_freebsd_386.tar.gz</code></li> <li><code>ddns-route53_2.14.0_freebsd_amd64.tar.gz</code></li> <li><code>ddns-route53_2.14.0_linux_386.tar.gz</code></li> <li><code>ddns-route53_2.14.0_linux_amd64.tar.gz</code></li> <li><code>ddns-route53_2.14.0_linux_arm64.tar.gz</code></li> <li><code>ddns-route53_2.14.0_linux_armv5.tar.gz</code></li> <li><code>ddns-route53_2.14.0_linux_armv6.tar.gz</code></li> <li><code>ddns-route53_2.14.0_linux_armv7.tar.gz</code></li> <li><code>ddns-route53_2.14.0_linux_mips64le_hardfloat.tar.gz</code></li> <li><code>ddns-route53_2.14.0_linux_mips64le_softfloat.tar.gz</code></li> <li><code>ddns-route53_2.14.0_linux_mips64_hardfloat.tar.gz</code></li> <li><code>ddns-route53_2.14.0_linux_mips64_softfloat.tar.gz</code></li> <li><code>ddns-route53_2.14.0_linux_mipsle_hardfloat.tar.gz</code></li> <li><code>ddns-route53_2.14.0_linux_mipsle_softfloat.tar.gz</code></li> <li><code>ddns-route53_2.14.0_linux_mips_hardfloat.tar.gz</code></li> <li><code>ddns-route53_2.14.0_linux_mips_softfloat.tar.gz</code></li> <li><code>ddns-route53_2.14.0_linux_ppc64le.tar.gz</code></li> <li><code>ddns-route53_2.14.0_linux_riscv64.tar.gz</code></li> <li><code>ddns-route53_2.14.0_linux_s390x.tar.gz</code></li> <li><code>ddns-route53_2.14.0_windows_386.zip</code></li> <li><code>ddns-route53_2.14.0_windows_amd64.zip</code></li> <li><code>ddns-route53_2.14.0_windows_arm64.zip</code></li> </ul> <p>And extract ddns-route53:</p> <pre><code>wget -qO- https://github.com/crazy-max/ddns-route53releases/download/v2.14.0/ddns-route53_2.14.0_linux_amd64.tar.gz | tar -zxvf - ddns-route53\n</code></pre> <p>After getting the binary, it can be tested with <code>./ddns-route53 --help</code> command and moved to a permanent location.</p>"},{"location":"install/binary/#server-configuration","title":"Server configuration","text":"<p>Steps below are the recommended server configuration.</p>"},{"location":"install/binary/#prepare-environment","title":"Prepare environment","text":"<p>Create user to run ddns-route53 (ex. <code>ddns-route53</code>)</p> <pre><code>groupadd ddns-route53\nuseradd -s /bin/false -d /bin/null -g ddns-route53 ddns-route53\n</code></pre>"},{"location":"install/binary/#create-required-directory-structure","title":"Create required directory structure","text":"<pre><code>mkdir -p /var/lib/ddns-route53\nchown ddns-route53:ddns-route53 /var/lib/ddns-route53/\nchmod -R 750 /var/lib/ddns-route53/\nmkdir /etc/ddns-route53\nchown ddns-route53:ddns-route53 /etc/ddns-route53\nchmod 770 /etc/ddns-route53\n</code></pre>"},{"location":"install/binary/#configuration","title":"Configuration","text":"<p>Create your first configuration file in <code>/etc/ddns-route53/ddns-route53.yml</code> and type:</p> <pre><code>chown ddns-route53:ddns-route53 /etc/ddns-route53/ddns-route53.yml\nchmod 644 /etc/ddns-route53/ddns-route53.yml\n</code></pre>"},{"location":"install/binary/#copy-binary-to-global-location","title":"Copy binary to global location","text":"<pre><code>cp ddns-route53 /usr/local/bin/ddns-route53\n</code></pre>"},{"location":"install/binary/#running-ddns-route53","title":"Running ddns-route53","text":"<p>After the above steps, two options to run ddns-route53:</p>"},{"location":"install/binary/#1-creating-a-service-file-recommended","title":"1. Creating a service file (recommended)","text":"<p>See how to create Linux service to start ddns-route53 automatically.</p>"},{"location":"install/binary/#2-running-from-terminal","title":"2. Running from terminal","text":"<pre><code>/usr/local/bin/ddns-route53 \\\n  --config /etc/ddns-route53/ddns-route53.yml \\\n  --schedule \"*/30 * * * *\"\n</code></pre>"},{"location":"install/binary/#updating-to-a-new-version","title":"Updating to a new version","text":"<p>You can update to a new version of ddns-route53 by stopping it, replacing the binary at <code>/usr/local/bin/ddns-route53</code> and restarting the instance.</p> <p>If you have carried out the installation steps as described above, the binary should have the generic name <code>ddns-route53</code>. Do not change this, i.e. to include the version number.</p>"},{"location":"install/docker/","title":"Installation with Docker","text":""},{"location":"install/docker/#about","title":"About","text":"<p>ddns-route53 provides automatically updated Docker  images within several registries:</p> Registry Image Docker Hub <code>crazymax/ddns-route53</code> GitHub Container Registry <code>ghcr.io/crazy-max/ddns-route53</code> <p>It is possible to always use the latest stable tag or to use another service that handles updating Docker images.</p> <p>Note</p> <p>Want to be notified of new releases? Check out  Diun (Docker Image Update Notifier) project!</p> <p>Following platforms for this image are available:</p> <pre><code>$ docker run --rm mplatform/mquery crazymax/ddns-route53:latest\nImage: crazymax/ddns-route53:latest\n * Manifest List: Yes\n * Supported platforms:\n   - linux/amd64\n   - linux/arm/v6\n   - linux/arm/v7\n   - linux/arm64\n   - linux/386\n   - linux/ppc64le\n</code></pre> <p>This reference setup guides users through the setup based on <code>docker-compose</code>, but the installation of <code>docker-compose</code> is out of scope of this documentation. To install <code>docker-compose</code> itself, follow the official install instructions.</p>"},{"location":"install/docker/#usage","title":"Usage","text":"<pre><code>version: \"3.5\"\n\nservices:\n  ddns-route53:\n    image: crazymax/ddns-route53:latest\n    container_name: ddns-route53\n    environment:\n      - \"TZ=Europe/Paris\"\n      - \"SCHEDULE=*/30 * * * *\"\n      - \"LOG_LEVEL=info\"\n      - \"LOG_JSON=false\"\n      - \"DDNSR53_CREDENTIALS_ACCESSKEYID=ABCDEFGHIJKLMNO123456\"\n      - \"DDNSR53_CREDENTIALS_SECRETACCESSKEY=abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\"\n      - \"DDNSR53_ROUTE53_HOSTEDZONEID=ABCEEFG123456789\"\n      - \"DDNSR53_ROUTE53_RECORDSSET_0_NAME=ddns.example.com.\"\n      - \"DDNSR53_ROUTE53_RECORDSSET_0_TYPE=A\"\n      - \"DDNSR53_ROUTE53_RECORDSSET_0_TTL=300\"\n    restart: always\n</code></pre> <p>Edit this example with your preferences and run the following commands to bring up ddns-route53:</p> <pre><code>docker-compose up -d\ndocker-compose logs -f\n</code></pre> <p>Or use the following command:</p> <pre><code>docker run -d --name ddns-route53 \\\n  -e \"TZ=Europe/Paris\" \\\n  -e \"SCHEDULE=*/30 * * * *\" \\\n  -e \"LOG_LEVEL=info\" \\\n  -e \"LOG_JSON=false\" \\\n  -e \"DDNSR53_CREDENTIALS_ACCESSKEYID=ABCDEFGHIJKLMNO123456\" \\\n  -e \"DDNSR53_CREDENTIALS_SECRETACCESSKEY=abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\" \\\n  -e \"DDNSR53_ROUTE53_HOSTEDZONEID=ABCEEFG123456789\" \\\n  -e \"DDNSR53_ROUTE53_RECORDSSET_0_NAME=ddns.example.com.\" \\\n  -e \"DDNSR53_ROUTE53_RECORDSSET_0_TYPE=A\" \\\n  -e \"DDNSR53_ROUTE53_RECORDSSET_0_TTL=300\" \\\n  crazymax/ddns-route53:latest\n</code></pre> <p>To upgrade your installation to the latest release:</p> <pre><code>docker-compose pull\ndocker-compose up -d\n</code></pre> <p>If you prefer to rely on the `configuration file instead of environment variables:</p> <pre><code># ./ddns-route53.yml\ncredentials:\n  accessKeyID: \"ABCDEFGHIJKLMNO123456\"\n  secretAccessKey: \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\"\n\nroute53:\n  hostedZoneID: \"ABCEEFG123456789\"\n  recordsSet:\n    - name: \"ddns.example.com.\"\n      type: \"A\"\n      ttl: 300\n</code></pre> <p>And your docker composition:</p> <pre><code>version: \"3.5\"\n\nservices:\n  ddns-route53:\n    image: crazymax/ddns-route53:latest\n    container_name: ddns-route53\n    volumes:\n      - \"./ddns-route53.yml:/ddns-route53.yml:ro\"\n    environment:\n      - \"TZ=Europe/Paris\"\n      - \"SCHEDULE=*/30 * * * *\"\n      - \"LOG_LEVEL=info\"\n      - \"LOG_JSON=false\"\n    restart: always\n</code></pre>"},{"location":"install/linux-service/","title":"Run as service on Debian based distro","text":""},{"location":"install/linux-service/#using-systemd","title":"Using systemd","text":"<p>Warning</p> <p>Make sure to follow the instructions to install from binary before.</p> <p>To create a new service, paste this content in <code>/etc/systemd/system/ddns-route53.service</code>:</p> <pre><code>[Unit]\nDescription=ddns-route53\nDocumentation=https://crazymax.dev/ddns-route53/\nAfter=syslog.target\nAfter=network.target\n\n[Service]\nRestartSec=2s\nType=simple\nUser=ddns-route53\nGroup=ddns-route53\nExecStart=/usr/local/bin/ddns-route53 --config /etc/ddns-route53/ddns-route53.yml\nRestart=always\n#Environment=TZ=Europe/Paris\n#Environment=AWS_ACCESS_KEY_ID=********\n#Environment=AWS_SECRET_ACCESS_KEY=********\nEnvironment=SCHEDULE=\"*/30 * * * *\"\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>Change the user, group, and other required startup values following your needs.</p> <p>Enable and start ddns-route53 at boot:</p> <pre><code>sudo systemctl enable ddns-route53\nsudo systemctl start ddns-route53\n</code></pre> <p>To view logs:</p> <pre><code>journalctl -fu ddns-route53.service\n</code></pre>"},{"location":"install/unifi-os/","title":"Installing on UniFi OS-based devices","text":"<p>This guide is for devices running UniFi OS such as:</p> <ul> <li>UDM</li> <li>UDM Pro</li> </ul>"},{"location":"install/unifi-os/#install-on-boot-script","title":"Install on-boot-script","text":"<p>Follow the guide.</p>"},{"location":"install/unifi-os/#create-the-config-file","title":"Create the config file","text":"<p>Create the config directory.</p> <pre><code>mkdir /mnt/data/ddns-route53\n</code></pre> <p>Create your <code>ddns-route53.yml</code> configuration file and save it as <code>/mnt/data/ddns-route53/ddns-route53.yml</code>.</p> <p>Fix the permissions of the config file.</p> <pre><code>chown 1000:1000 /mnt/data/ddns-route53/ddns-route53.yml\n</code></pre>"},{"location":"install/unifi-os/#setup-the-service","title":"Setup the service","text":"<p>Copy the following configuration and save it to <code>/mnt/data/on_boot.d/20-ddns-route53.sh</code>. Be sure to change the <code>TZ=America/Vancouver</code> line to your own timezone.</p> <pre><code>#!/bin/sh\n\nCNI_PATH=/mnt/data/podman/cni\nif [ ! -f \"$CNI_PATH\"/macvlan ]; then\n    mkdir -p $CNI_PATH\n    curl -L https://github.com/containernetworking/plugins/releases/download/v0.8.6/cni-plugins-linux-arm64-v0.8.6.tgz | tar -xz -C $CNI_PATH\nfi\n\nmkdir -p /opt/cni\nrm -f /opt/cni/bin\nln -s $CNI_PATH /opt/cni/bin\n\nfor file in \"$CNI_PATH\"/*.conflist\ndo\n    if [ -f \"$file\" ]; then\n        link_path=\"/etc/cni/net.d/$(basename \"$file\")\"\n        rm -f \"$link_path\"\n        ln -s \"$file\" \"$link_path\"\n    fi\ndone\n\npodman run -d --restart always \\\n  --name ddns-route53 \\\n  --hostname ddns-route53 \\\n  -v \"/mnt/data/ddns-route53/ddns-route53.yml:/ddns-route53.yml:ro\" \\\n  -e \"TZ=America/Vancouver\" \\\n  -e \"SCHEDULE=*/30 * * * *\" \\\n  -e \"LOG_LEVEL=info\" \\\n  -e \"LOG_JSON=false\" \\\n  docker.io/crazymax/ddns-route53:latest\n</code></pre> <p>Make the script executable.</p> <pre><code>chmod +x /mnt/data/on_boot.d/20-ddns-route53.sh\n</code></pre>"},{"location":"install/unifi-os/#start-the-service","title":"Start the service","text":"<p>Start the service.</p> <pre><code>/mnt/data/on_boot.d/20-ddns-route53.sh\n</code></pre> <p>The next time the device restarts the service will automatically start.</p>"},{"location":"install/unifi-os/#checking-the-logs","title":"Checking the logs","text":"<p>Check the logs with podman.</p> <pre><code>podman logs ddns-route53\n</code></pre>"},{"location":"install/unifi/","title":"Installing on a VyOS-based UniFi Gateway Devices","text":"<p>This guide is for devices running VyOS such as:</p> <ul> <li>USG 3P</li> <li>USG Pro 4</li> </ul>"},{"location":"install/unifi/#install-the-binary","title":"Install the binary","text":"<p>Determine which architecture the USG is using:</p> <pre><code>uname -a\n</code></pre> <p>Determine if the USG is using <code>softfloat</code> or <code>hardfloat</code> optimizations:</p> <pre><code>readelf -A /bin/sh | grep ABI_FP\n</code></pre> <p>Tip</p> <p>To ensure that ddns-route53 persists across reboots, it should be stored in the <code>/config/scripts</code> directory.</p> <p>Install the ddns-route53 binary that matches the reported architecture and float type by following the install from binary instructions.</p> <p>Now you have to create your <code>ddns-route53.yml</code> configuration file in <code>/config/scripts/ddns-route53.yml</code></p>"},{"location":"install/unifi/#on-the-cloud-keycontroller","title":"On the Cloud Key/Controller","text":""},{"location":"install/unifi/#find-the-unifi-base-path","title":"Find the UniFi base path","text":"<p>By default, the paths are as follows:</p> <ul> <li>UniFi Cloud Key: <code>/srv/unifi</code></li> <li>Debian/Ubuntu Linux: <code>/usr/lib/unifi</code></li> <li>Windows: <code>%USERPROFILE%/Ubiquiti UniFi</code></li> <li>macOS: <code>~/Library/Application Support/UniFi</code></li> </ul>"},{"location":"install/unifi/#create-a-configgatewayjson","title":"Create a <code>config.gateway.json</code>","text":"<p>Create a file called <code>config.gateway.json</code> in your <code>&lt;unifi_base&gt;/data/sites/&lt;site_id&gt;</code> directory with the following contents:</p> <pre><code>{\n  \"system\": {\n    \"task-scheduler\": {\n      \"task\": {\n        \"dnsupdate\": {\n          \"executable\": {\n            \"path\": \"/config/scripts/ddns-route53 --config /config/scripts/ddns-route53.yml\"\n          },\n          \"interval\": \"1m\"\n        }\n      }\n    }\n  }\n}\n</code></pre> <p>Tip</p> <p>The <code>interval</code> field sets how often ddns-route53 will run (e.g. 1 minute).</p> <p>Info</p> <p>See UniFi - USG advanced configuration using <code>config.gateway.json</code> for more information.</p>"},{"location":"install/unifi/#trigger-a-provision-for-the-usg","title":"Trigger a provision for the USG","text":"<p>See How to trigger a provision for instructions.</p>"},{"location":"migration/v1-to-v2/","title":"ddns-route53 v1 to v2","text":""},{"location":"migration/v1-to-v2/#configuration-transposed-into-environment-variables","title":"Configuration transposed into environment variables","text":"<p>All configuration is now transposed into environment variables. Take a look at the documentation for more details.</p> <p><code>AWS_HOSTED_ZONE_ID</code> env var has been renamed <code>DDNSR53_ROUTE53_HOSTEDZONEID</code> to follow environment variables transposition.</p>"},{"location":"migration/v1-to-v2/#all-fields-in-configuration-are-now-camelcased","title":"All fields in configuration are now camelCased","text":"<p>In order to enable transposition into environmental variables, all fields in configuration are now camelCased:</p> <ul> <li><code>credentials.access_key_id</code> &gt; <code>credentials.accessKeyID</code></li> <li><code>credentials.secret_access_key</code> &gt; <code>credentials.secretAccessKey</code></li> <li><code>route53.hosted_zone_id</code> &gt; <code>route53.hostedZoneID</code></li> <li>...</li> </ul> v1 <pre><code>credentials:\n  access_key_id: \"ABCDEFGHIJKLMNO123456\"\n  secret_access_key: \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\"\n\nroute53:\n  hosted_zone_id: \"ABCEEFG123456789\"\n  records_set:\n    - name: \"ddns.example.com.\"\n      type: \"A\"\n      ttl: 300\n    - name: \"ddns.example.com.\"\n      type: \"AAAA\"\n      ttl: 300\n    - name: \"another.example2.com.\"\n      type: \"A\"\n      ttl: 600\n</code></pre> v2 <pre><code>credentials:\n  accessKeyID: \"ABCDEFGHIJKLMNO123456\"\n  secretAccessKey: \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\"\n\nroute53:\n  hostedZoneID: \"ABCEEFG123456789\"\n  recordsSet:\n    - name: \"ddns.example.com.\"\n      type: \"A\"\n      ttl: 300\n    - name: \"ddns.example.com.\"\n      type: \"AAAA\"\n      ttl: 300\n    - name: \"another.example2.com.\"\n      type: \"A\"\n      ttl: 600\n</code></pre>"},{"location":"usage/basic-example/","title":"Basic example","text":"<p>In this section we quickly go over a basic way to run ddns-route53.</p>"},{"location":"usage/basic-example/#setup","title":"Setup","text":"<p>Warning</p> <p>Make sure to follow the instructions to install from binary before.</p> <p>First create a <code>ddns-route53.yml</code> configuration file like this one:</p> <pre><code># ./ddns-route53.yml\ncredentials:\n  accessKeyID: \"ABCDEFGHIJKLMNO123456\"\n  secretAccessKey: \"abcdefgh123456IJKLMN+OPQRS7890+ABCDEFGH\"\n\nroute53:\n  hostedZoneID: \"ABCEEFG123456789\"\n  recordsSet:\n    - name: \"ddns.example.com.\"\n      type: \"A\"\n      ttl: 300\n</code></pre> <p>That's it. Now you can launch ddns-route53 with the following command:</p> <pre><code>ddns-route53 --config ./ddns-route53.yml --schedule \"*/30 * * * *\"\n</code></pre>"},{"location":"usage/cli/","title":"Command Line","text":""},{"location":"usage/cli/#usage","title":"Usage","text":"<pre><code>ddns-route53 [options]\n</code></pre>"},{"location":"usage/cli/#options","title":"Options","text":"<pre><code>$ ddns-route53 --help\nUsage: ddns-route53\n\nDynamic DNS for Amazon Route 53 on a time-based schedule. More info:\nhttps://github.com/crazy-max/ddns-route53\n\nFlags:\n  -h, --help                    Show context-sensitive help.\n      --version\n      --config=STRING           ddns-route53 configuration file ($CONFIG).\n      --schedule=STRING         CRON expression format ($SCHEDULE).\n      --ifname=STRING           Network interface name to be used for WAN IP\n                                retrieval. Leave empty to use the default one\n                                ($IFNAME).\n      --max-retries=3           Number of retries in case of WAN IP retrieval\n                                and AWS request failure ($MAX_RETRIES).\n      --max-backoff-delay=5s    Max back off delay that is allowed to\n                                occur between retrying a failed AWS request\n                                ($MAX_BACKOFF_DELAY).\n      --log-level=\"info\"        Set log level ($LOG_LEVEL).\n      --log-json                Enable JSON logging output ($LOG_JSON).\n      --log-caller              Add file:line of the caller to log output\n                                ($LOG_CALLER).\n      --log-nocolor             Disables the colorized output ($LOG_NOCOLOR).\n</code></pre>"},{"location":"usage/cli/#environment-variables","title":"Environment variables","text":"<p>The following environment variables can be used in place:</p> Name Default Description <code>CONFIG</code> ddns-route53 configuration file <code>SCHEDULE</code> CRON expression to schedule ddns-route53 <code>IFNAME</code> Network interface name to be used for WAN IP retrieval. Leave empty to use the default one <code>MAX_RETRIES</code> <code>3</code> Number of retries in case of WAN IP retrieval and AWS request failure <code>MAX_BACKOFF_DELAY</code> <code>5s</code> Max back off delay that is allowed to occur between retrying a failed AWS request <code>LOG_LEVEL</code> <code>info</code> Log level output <code>LOG_JSON</code> <code>false</code> Enable JSON logging output <code>LOG_CALLER</code> <code>false</code> Enable to add <code>file:line</code> of the caller <code>LOG_NOCOLOR</code> <code>false</code> Disables the colorized output <p>Warning</p> <p>If schedule is not set, the app will run once and then exit.</p>"},{"location":"usage/prerequisites/","title":"Prerequisites","text":"<p>I assume you have already created a Route 53 Hosted Zones as a Public Hosted Zone type and setted Amazon name servers in your domain name registrar.</p> <p>Note</p> <p>If you are using EC2 IAM instance roles or AWS IAM roles for service accounts (IRSA), creating a user is not required. Configuration of IAM roles is beyond the scope of this document, and is discussed in the official AWS documentation linked above. For all other use cases, follow the steps below to create a policy and user.</p> <p>Go to the IAM Policies page and click on Create Policy.</p> <p>Then click on JSON tab and paste the following content:</p> <pre><code>{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Action\": [\n                \"route53:ChangeResourceRecordSets\",\n                \"route53:ListResourceRecordSets\"\n            ],\n            \"Effect\": \"Allow\",\n            \"Resource\": \"arn:aws:route53:::hostedzone/&lt;HOSTED_ZONE_ID&gt;\"\n        }\n    ]\n}\n</code></pre> <p>Tip</p> <p>Replace <code>&lt;HOSTED_ZONE_ID&gt;</code> with your current hosted zone id you can find on Route 53 Hosted Zones page.</p> <p>Enter a Policy Name and click Create Policy.</p> <p>Now go to the IAM Users page and click the Add user button.</p> <p>Enter a User name, check Programmatic access for Access type and click Next: Permissions.</p> <p>Choose the last option Attach existing policies directly and fill in the Search field with the name of the policy you created before and click Next: Review then Create user.</p> <p>An Access Key ID and a Secret Access key will be displayed. This is the credentials needed for ddns-route53. Save them somewhere since you will need them in the configuration step.</p>"}]}